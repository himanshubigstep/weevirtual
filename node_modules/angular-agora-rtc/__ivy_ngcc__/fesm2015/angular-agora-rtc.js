import { Injectable, Inject, NgModule, Component, defineInjectable, inject } from '@angular/core';
import { checkSystemRequirements, getDevices, createClient, createStream, Logger } from 'agora-rtc-sdk';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function AgoraLocalComponent_i_4_Template(rf, ctx) { if (rf & 1) {
    const _r4 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 8);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_i_4_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.startCall(); });
    ɵngcc0.ɵɵtext(1, "videocam");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 11);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_1_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.leave(); });
    ɵngcc0.ɵɵtext(1, "phone");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_2_Template(rf, ctx) { if (rf & 1) {
    const _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_2_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.toggleAudio(); });
    ɵngcc0.ɵɵtext(1, "mic");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_3_Template(rf, ctx) { if (rf & 1) {
    const _r15 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_3_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.toggleAudio(); });
    ɵngcc0.ɵɵtext(1, "mic_off");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_4_Template(rf, ctx) { if (rf & 1) {
    const _r17 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_4_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.toggleVideo(); });
    ɵngcc0.ɵɵtext(1, "videocam");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_i_5_Template(rf, ctx) { if (rf & 1) {
    const _r19 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "i", 12);
    ɵngcc0.ɵɵlistener("click", function AgoraLocalComponent_ng_container_5_i_5_Template_i_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r18 = ɵngcc0.ɵɵnextContext(2); return ctx_r18.toggleVideo(); });
    ɵngcc0.ɵɵtext(1, "videocam_off");
    ɵngcc0.ɵɵelementEnd();
} }
function AgoraLocalComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, AgoraLocalComponent_ng_container_5_i_1_Template, 2, 0, "i", 9);
    ɵngcc0.ɵɵtemplate(2, AgoraLocalComponent_ng_container_5_i_2_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(3, AgoraLocalComponent_ng_container_5_i_3_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(4, AgoraLocalComponent_ng_container_5_i_4_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵtemplate(5, AgoraLocalComponent_ng_container_5_i_5_Template, 2, 0, "i", 10);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.activeCall);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.audioEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.audioEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.videoEnabled);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r1.videoEnabled);
} }
function AgoraLocalComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "div", 13);
} if (rf & 2) {
    const remote_r20 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("id", remote_r20);
} }
class AgoraConfig {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AngularAgoraRtcService {
    /**
     * @param {?} config
     */
    constructor(config) {
        this.config = config;
        if (!this.checkSystemRequirements()) {
            this.logger('error', 'Web RTC is not supported');
        }
        else {
            this.getDevices();
        }
    }
    /**
     * @return {?}
     */
    checkSystemRequirements() {
        return checkSystemRequirements();
    }
    /**
     * @return {?}
     */
    getDevices() {
        getDevices((devices) => {
            /** @type {?} */
            let audioDevices = devices.filter(device => {
                return device.kind === 'audioinput' && device.deviceId !== 'default';
            });
            /** @type {?} */
            let videoDevices = devices.filter(device => {
                return device.kind === 'videoinput' && device.deviceId !== 'default';
            });
            this.audioDevices = audioDevices;
            this.videoDevices = videoDevices;
        });
    }
    /**
     * @param {?=} mode
     * @return {?}
     */
    createClient(mode = 'interop') {
        this.client = createClient({ mode: mode });
        this.client.init(this.config.AppID);
    }
    /**
     * @param {?} streamID
     * @param {?} audio
     * @param {?=} cameraId
     * @param {?=} microphoneId
     * @param {?=} video
     * @param {?=} screen
     * @return {?}
     */
    createStream(streamID, audio, cameraId = this.videoDevices[0].deviceId, microphoneId = this.audioDevices[0].deviceId, video, screen) {
        return createStream({ streamID, audio, cameraId, microphoneId, video, screen });
    }
    /**
     * @param {?} type
     * @param {?} message
     * @return {?}
     */
    logger(type, message) {
        switch (type) {
            case 'error':
                Logger.error(message);
                break;
            case 'warning':
                Logger.warning(message);
                break;
            case 'info':
                Logger.info(message);
                break;
            case 'debug':
                Logger.debug(message);
                break;
            default:
                Logger.error(message);
        }
    }
}
AngularAgoraRtcService.ɵfac = function AngularAgoraRtcService_Factory(t) { return new (t || AngularAgoraRtcService)(ɵngcc0.ɵɵinject('config')); };
AngularAgoraRtcService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: AngularAgoraRtcService, factory: AngularAgoraRtcService.ɵfac, providedIn: 'root' });
/** @nocollapse */
AngularAgoraRtcService.ctorParameters = () => [
    { type: AgoraConfig, decorators: [{ type: Inject, args: ['config',] }] }
];
/** @nocollapse */ AngularAgoraRtcService.ngInjectableDef = defineInjectable({ factory: function AngularAgoraRtcService_Factory() { return new AngularAgoraRtcService(inject("config")); }, token: AngularAgoraRtcService, providedIn: "root" });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularAgoraRtcService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: AgoraConfig, decorators: [{
                type: Inject,
                args: ['config']
            }] }]; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AgoraLocalComponent {
    /**
     * @param {?} agoraService
     */
    constructor(agoraService) {
        this.agoraService = agoraService;
        this.activeCall = false;
        this.audioEnabled = true;
        this.videoEnabled = true;
        this.remoteCalls = [];
        this.agoraService.createClient();
    }
    /**
     * @return {?}
     */
    startCall() {
        this.activeCall = true;
        this.agoraService.client.join(null, '1000', null, (uid) => {
            this.localStream = this.agoraService.createStream(uid, true, null, null, true, false);
            this.localStream.setVideoProfile('720p_3');
            this.subscribeToStreams();
        });
    }
    /**
     * @return {?}
     */
    subscribeToStreams() {
        this.localStream.on("accessAllowed", () => {
            console.log("accessAllowed");
        });
        // The user has denied access to the camera and mic.
        this.localStream.on("accessDenied", () => {
            console.log("accessDenied");
        });
        this.localStream.init(() => {
            console.log("getUserMedia successfully");
            this.localStream.play('agora_local');
            this.agoraService.client.publish(this.localStream, function (err) {
                console.log("Publish local stream error: " + err);
            });
            this.agoraService.client.on('stream-published', function (evt) {
                console.log("Publish local stream successfully");
            });
        }, function (err) {
            console.log("getUserMedia failed", err);
        });
        this.agoraService.client.on('error', (err) => {
            console.log("Got error msg:", err.reason);
            if (err.reason === 'DYNAMIC_KEY_TIMEOUT') {
                this.agoraService.client.renewChannelKey("", () => {
                    console.log("Renew channel key successfully");
                }, (err) => {
                    console.log("Renew channel key failed: ", err);
                });
            }
        });
        this.agoraService.client.on('stream-added', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            this.agoraService.client.subscribe(stream, (err) => {
                console.log("Subscribe stream failed", err);
            });
        });
        this.agoraService.client.on('stream-subscribed', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            if (!this.remoteCalls.includes(`agora_remote${stream.getId()}`))
                this.remoteCalls.push(`agora_remote${stream.getId()}`);
            setTimeout(() => stream.play(`agora_remote${stream.getId()}`), 2000);
        });
        this.agoraService.client.on('stream-removed', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            stream.stop();
            this.remoteCalls = this.remoteCalls.filter(call => call !== `#agora_remote${stream.getId()}`);
            console.log(`Remote stream is removed ${stream.getId()}`);
        });
        this.agoraService.client.on('peer-leave', (evt) => {
            /** @type {?} */
            const stream = evt.stream;
            if (stream) {
                stream.stop();
                this.remoteCalls = this.remoteCalls.filter(call => call === `#agora_remote${stream.getId()}`);
                console.log(`${evt.uid} left from this channel`);
            }
        });
    }
    /**
     * @return {?}
     */
    leave() {
        this.agoraService.client.leave(() => {
            this.activeCall = false;
            document.getElementById('agora_local').innerHTML = "";
            console.log("Leavel channel successfully");
        }, (err) => {
            console.log("Leave channel failed");
        });
    }
    /**
     * @return {?}
     */
    toggleAudio() {
        this.audioEnabled = !this.audioEnabled;
        if (this.audioEnabled)
            this.localStream.enableAudio();
        else
            this.localStream.disableAudio();
    }
    /**
     * @return {?}
     */
    toggleVideo() {
        this.videoEnabled = !this.videoEnabled;
        if (this.videoEnabled)
            this.localStream.enableVideo();
        else
            this.localStream.disableVideo();
    }
}
AgoraLocalComponent.ɵfac = function AgoraLocalComponent_Factory(t) { return new (t || AgoraLocalComponent)(ɵngcc0.ɵɵdirectiveInject(AngularAgoraRtcService)); };
AgoraLocalComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AgoraLocalComponent, selectors: [["agora-rtc"]], decls: 8, vars: 3, consts: [[1, "video-container"], [1, "call-container"], [1, "agora_local"], [1, "video-buttons"], ["class", "startCall material-icons", 3, "click", 4, "ngIf"], [4, "ngIf"], ["id", "agora_local"], ["class", "agora_remote", 3, "id", 4, "ngFor", "ngForOf"], [1, "startCall", "material-icons", 3, "click"], ["class", "endCall material-icons", 3, "click", 4, "ngIf"], ["class", "mic material-icons", 3, "click", 4, "ngIf"], [1, "endCall", "material-icons", 3, "click"], [1, "mic", "material-icons", 3, "click"], [1, "agora_remote", 3, "id"]], template: function AgoraLocalComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelement(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "div", 3);
        ɵngcc0.ɵɵtemplate(4, AgoraLocalComponent_i_4_Template, 2, 0, "i", 4);
        ɵngcc0.ɵɵtemplate(5, AgoraLocalComponent_ng_container_5_Template, 6, 5, "ng-container", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(6, "div", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(7, AgoraLocalComponent_div_7_Template, 1, 1, "div", 7);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.activeCall);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.activeCall);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.remoteCalls);
    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf], styles: ["@import url(https://fonts.googleapis.com/icon?family=Material+Icons);p[_ngcontent-%COMP%]{font-family:Lato}.video-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.agora_local[_ngcontent-%COMP%]{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}#agora_local[_ngcontent-%COMP%]{height:250px;width:250px;top:-28px}.agora_remote[_ngcontent-%COMP%]{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}.video-buttons[_ngcontent-%COMP%]{width:250px;top:210px;position:relative;text-align:center;z-index:999}.video-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.endCall[_ngcontent-%COMP%]{color:red}.mic[_ngcontent-%COMP%], .startCall[_ngcontent-%COMP%]{color:#fff}"] });
/** @nocollapse */
AgoraLocalComponent.ctorParameters = () => [
    { type: AngularAgoraRtcService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AgoraLocalComponent, [{
        type: Component,
        args: [{
                selector: 'agora-rtc',
                template: `<div class="video-container">
	<div class="call-container">
	</div>
	<div class="agora_local">
		<div class="video-buttons">
			<i class="startCall material-icons" (click)="startCall()" *ngIf="!activeCall">videocam</i>
			<ng-container *ngIf="activeCall">
				<i class="endCall material-icons" (click)="leave()" *ngIf="activeCall">phone</i>

				<i class="mic material-icons" (click)="toggleAudio()" *ngIf="audioEnabled">mic</i>
				<i class="mic material-icons" (click)="toggleAudio()" *ngIf="!audioEnabled">mic_off</i>

				<i class="mic material-icons" (click)="toggleVideo()" *ngIf="videoEnabled">videocam</i>
				<i class="mic material-icons" (click)="toggleVideo()" *ngIf="!videoEnabled">videocam_off</i>
			</ng-container>
		</div>
		<div id="agora_local"></div>
	</div>
	<div class="agora_remote" *ngFor="let remote of remoteCalls" [id]="remote">

	</div>
</div>`,
                styles: [`@import url(https://fonts.googleapis.com/icon?family=Material+Icons);p{font-family:Lato}.video-container{height:100vh;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.agora_local{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}#agora_local{height:250px;width:250px;top:-28px}.agora_remote{background-color:#404040;height:250px;width:250px;border:1px solid #000;margin:8px}.video-buttons{width:250px;top:210px;position:relative;text-align:center;z-index:999}.video-buttons i{cursor:pointer}.endCall{color:red}.mic,.startCall{color:#fff}`]
            }]
    }], function () { return [{ type: AngularAgoraRtcService }]; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AngularAgoraRtcModule {
    /**
     * @param {?} config
     * @return {?}
     */
    static forRoot(config) {
        return {
            ngModule: AngularAgoraRtcModule,
            providers: [AngularAgoraRtcService, { provide: 'config', useValue: config }]
        };
    }
}
AngularAgoraRtcModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AngularAgoraRtcModule });
AngularAgoraRtcModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AngularAgoraRtcModule_Factory(t) { return new (t || AngularAgoraRtcModule)(); }, imports: [[
            CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AngularAgoraRtcModule, { declarations: function () { return [AgoraLocalComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [AgoraLocalComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AngularAgoraRtcModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule
                ],
                declarations: [AgoraLocalComponent],
                exports: [AgoraLocalComponent]
            }]
    }], null, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class AgoraClient {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Stream {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Device {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { AngularAgoraRtcService, AgoraLocalComponent, AngularAgoraRtcModule, AgoraClient, Stream, Device, AgoraConfig };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1hZ29yYS1ydGMuanMiLCJzb3VyY2VzIjpbIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvQWdvcmFDb25maWcudHMiLCJuZzovYW5ndWxhci1hZ29yYS1ydGMvbGliL2FuZ3VsYXItYWdvcmEtcnRjLnNlcnZpY2UudHMiLCJuZzovYW5ndWxhci1hZ29yYS1ydGMvbGliL2Fnb3JhLWxvY2FsLmNvbXBvbmVudC50cyIsIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvYW5ndWxhci1hZ29yYS1ydGMubW9kdWxlLnRzIiwibmc6L2FuZ3VsYXItYWdvcmEtcnRjL2xpYi9BZ29yYUNsaWVudC50cyIsIm5nOi9hbmd1bGFyLWFnb3JhLXJ0Yy9saWIvU3RyZWFtLnRzIiwibmc6L2FuZ3VsYXItYWdvcmEtcnRjL2xpYi9EZXZpY2UudHMiXSwibmFtZXMiOlsiQWdvcmFSVEMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMiLCJBZ29yYVJUQy5nZXREZXZpY2VzIiwiQWdvcmFSVEMuY3JlYXRlQ2xpZW50IiwiQWdvcmFSVEMuY3JlYXRlU3RyZWFtIiwiQWdvcmFSVEMuTG9nZ2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQW9CLENBRW5CO0FBQUM7QUFBQztBQUFJO0FBQWtDO0FBQXlDO0FDRmxGO0FBQStCO0FBQVE7QUFDM0I7QUFBUSxJQWVsQixZQUM0QixNQUFrQjtBQUM3QyxRQUQyQixXQUFNLEdBQU4sTUFBTSxDQUFZO0FBQ2hELFFBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxFQUFFO0FBQ3pDLFlBQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztBQUN2RCxTQUFLO0FBQUMsYUFBSTtBQUNWLFlBQU0sSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3hCLFNB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QUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBQyxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUFDLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0FDLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0FBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0FBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0FBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUEvREEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUxBLEFBQUEsQUFjQSxBQUFBLEFBQUEsQUFBQSxBQ2pCQSxBQXNDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFQQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBS0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFuSUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFxQkEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQTVCQSxBQUFBLEFDREEsQUFjQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFiQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQ1pBLEFBa0NBLEFDbENBLEFBeURBLEFDekRBLEFBS0EiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQWdvcmFDb25maWd7XG4gICAgQXBwSUQ6c3RyaW5nO1xufSIsImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgQWdvcmFSVEMgZnJvbSAnYWdvcmEtcnRjLXNkayc7XG5pbXBvcnQgeyBTdWJqZWN0LCBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFnb3JhQ29uZmlnIH0gZnJvbSAnLi9BZ29yYUNvbmZpZyc7XG5pbXBvcnQgeyBBZ29yYUNsaWVudCB9IGZyb20gJy4vQWdvcmFDbGllbnQnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyQWdvcmFSdGNTZXJ2aWNlIHtcblxuICBwdWJsaWMgYXVkaW9EZXZpY2VzOiBhbnlbXTtcbiAgcHVibGljIHZpZGVvRGV2aWNlczogYW55W107XG5cbiAgcHVibGljIGNsaWVudDogQWdvcmFDbGllbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdCgnY29uZmlnJykgcHJpdmF0ZSBjb25maWc6QWdvcmFDb25maWdcbiAgKSB7XG4gICAgaWYgKCF0aGlzLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCkpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdlcnJvcicsICdXZWIgUlRDIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9IGVsc2V7XG4gICAgICB0aGlzLmdldERldmljZXMoKTtcbiAgICB9XG4gIH1cblxuICBjaGVja1N5c3RlbVJlcXVpcmVtZW50cygpIHtcbiAgICByZXR1cm4gQWdvcmFSVEMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGV2aWNlcygpIHtcbiAgICBBZ29yYVJUQy5nZXREZXZpY2VzKChkZXZpY2VzKSA9PiB7XG4gICAgICBsZXQgYXVkaW9EZXZpY2VzID0gZGV2aWNlcy5maWx0ZXIoZGV2aWNlID0+IHtcbiAgICAgICAgcmV0dXJuIGRldmljZS5raW5kID09PSAnYXVkaW9pbnB1dCcgJiYgZGV2aWNlLmRldmljZUlkICE9PSAnZGVmYXVsdCdcbiAgICAgIH0pO1xuICAgICAgbGV0IHZpZGVvRGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGRldmljZSA9PiB7XG4gICAgICAgIHJldHVybiBkZXZpY2Uua2luZCA9PT0gJ3ZpZGVvaW5wdXQnICYmIGRldmljZS5kZXZpY2VJZCAhPT0gJ2RlZmF1bHQnXG4gICAgICB9KTtcbiAgICAgIHRoaXMuYXVkaW9EZXZpY2VzID0gYXVkaW9EZXZpY2VzO1xuICAgICAgdGhpcy52aWRlb0RldmljZXMgPSB2aWRlb0RldmljZXM7XG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVDbGllbnQobW9kZTogc3RyaW5nID0gJ2ludGVyb3AnKSB7XG4gICAgIHRoaXMuY2xpZW50ID0gQWdvcmFSVEMuY3JlYXRlQ2xpZW50KHsgbW9kZTogbW9kZSB9KTtcbiAgICAgdGhpcy5jbGllbnQuaW5pdCh0aGlzLmNvbmZpZy5BcHBJRCk7XG4gIH1cblxuICBjcmVhdGVTdHJlYW0oc3RyZWFtSUQ6IGFueSwgYXVkaW86IGJvb2xlYW4sIGNhbWVyYUlkOiBzdHJpbmcgPSB0aGlzLnZpZGVvRGV2aWNlc1swXS5kZXZpY2VJZCwgbWljcm9waG9uZUlkOiBzdHJpbmcgPSB0aGlzLmF1ZGlvRGV2aWNlc1swXS5kZXZpY2VJZCwgdmlkZW86IGJvb2xlYW4sIHNjcmVlbjogYm9vbGVhbikge1xuICAgIHJldHVybiBBZ29yYVJUQy5jcmVhdGVTdHJlYW0oe3N0cmVhbUlELCBhdWRpbywgY2FtZXJhSWQsIG1pY3JvcGhvbmVJZCwgdmlkZW8sIHNjcmVlbn0pO1xuICB9XG5cbiAgbG9nZ2VyKHR5cGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIEFnb3JhUlRDLkxvZ2dlci5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgQWdvcmFSVEMuTG9nZ2VyLndhcm5pbmcobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgIEFnb3JhUlRDLkxvZ2dlci5pbmZvKG1lc3NhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlYnVnJzpcbiAgICAgICAgQWdvcmFSVEMuTG9nZ2VyLmRlYnVnKG1lc3NhZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIEFnb3JhUlRDLkxvZ2dlci5lcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQW5ndWxhckFnb3JhUnRjU2VydmljZSB9IGZyb20gJy4vYW5ndWxhci1hZ29yYS1ydGMuc2VydmljZSc7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuL1N0cmVhbSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Fnb3JhLXJ0YycsXG4gIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cInZpZGVvLWNvbnRhaW5lclwiPlxuXHQ8ZGl2IGNsYXNzPVwiY2FsbC1jb250YWluZXJcIj5cblx0PC9kaXY+XG5cdDxkaXYgY2xhc3M9XCJhZ29yYV9sb2NhbFwiPlxuXHRcdDxkaXYgY2xhc3M9XCJ2aWRlby1idXR0b25zXCI+XG5cdFx0XHQ8aSBjbGFzcz1cInN0YXJ0Q2FsbCBtYXRlcmlhbC1pY29uc1wiIChjbGljayk9XCJzdGFydENhbGwoKVwiICpuZ0lmPVwiIWFjdGl2ZUNhbGxcIj52aWRlb2NhbTwvaT5cblx0XHRcdDxuZy1jb250YWluZXIgKm5nSWY9XCJhY3RpdmVDYWxsXCI+XG5cdFx0XHRcdDxpIGNsYXNzPVwiZW5kQ2FsbCBtYXRlcmlhbC1pY29uc1wiIChjbGljayk9XCJsZWF2ZSgpXCIgKm5nSWY9XCJhY3RpdmVDYWxsXCI+cGhvbmU8L2k+XG5cblx0XHRcdFx0PGkgY2xhc3M9XCJtaWMgbWF0ZXJpYWwtaWNvbnNcIiAoY2xpY2spPVwidG9nZ2xlQXVkaW8oKVwiICpuZ0lmPVwiYXVkaW9FbmFibGVkXCI+bWljPC9pPlxuXHRcdFx0XHQ8aSBjbGFzcz1cIm1pYyBtYXRlcmlhbC1pY29uc1wiIChjbGljayk9XCJ0b2dnbGVBdWRpbygpXCIgKm5nSWY9XCIhYXVkaW9FbmFibGVkXCI+bWljX29mZjwvaT5cblxuXHRcdFx0XHQ8aSBjbGFzcz1cIm1pYyBtYXRlcmlhbC1pY29uc1wiIChjbGljayk9XCJ0b2dnbGVWaWRlbygpXCIgKm5nSWY9XCJ2aWRlb0VuYWJsZWRcIj52aWRlb2NhbTwvaT5cblx0XHRcdFx0PGkgY2xhc3M9XCJtaWMgbWF0ZXJpYWwtaWNvbnNcIiAoY2xpY2spPVwidG9nZ2xlVmlkZW8oKVwiICpuZ0lmPVwiIXZpZGVvRW5hYmxlZFwiPnZpZGVvY2FtX29mZjwvaT5cblx0XHRcdDwvbmctY29udGFpbmVyPlxuXHRcdDwvZGl2PlxuXHRcdDxkaXYgaWQ9XCJhZ29yYV9sb2NhbFwiPjwvZGl2PlxuXHQ8L2Rpdj5cblx0PGRpdiBjbGFzcz1cImFnb3JhX3JlbW90ZVwiICpuZ0Zvcj1cImxldCByZW1vdGUgb2YgcmVtb3RlQ2FsbHNcIiBbaWRdPVwicmVtb3RlXCI+XG5cblx0PC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgQGltcG9ydCB1cmwoaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9pY29uP2ZhbWlseT1NYXRlcmlhbCtJY29ucyk7cHtmb250LWZhbWlseTpMYXRvfS52aWRlby1jb250YWluZXJ7aGVpZ2h0OjEwMHZoO2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtmbGV4LWRpcmVjdGlvbjpyb3c7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uYWdvcmFfbG9jYWx7YmFja2dyb3VuZC1jb2xvcjojNDA0MDQwO2hlaWdodDoyNTBweDt3aWR0aDoyNTBweDtib3JkZXI6MXB4IHNvbGlkICMwMDA7bWFyZ2luOjhweH0jYWdvcmFfbG9jYWx7aGVpZ2h0OjI1MHB4O3dpZHRoOjI1MHB4O3RvcDotMjhweH0uYWdvcmFfcmVtb3Rle2JhY2tncm91bmQtY29sb3I6IzQwNDA0MDtoZWlnaHQ6MjUwcHg7d2lkdGg6MjUwcHg7Ym9yZGVyOjFweCBzb2xpZCAjMDAwO21hcmdpbjo4cHh9LnZpZGVvLWJ1dHRvbnN7d2lkdGg6MjUwcHg7dG9wOjIxMHB4O3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyO3otaW5kZXg6OTk5fS52aWRlby1idXR0b25zIGl7Y3Vyc29yOnBvaW50ZXJ9LmVuZENhbGx7Y29sb3I6cmVkfS5taWMsLnN0YXJ0Q2FsbHtjb2xvcjojZmZmfWBdXG59KVxuZXhwb3J0IGNsYXNzIEFnb3JhTG9jYWxDb21wb25lbnQge1xuXG4gIGFjdGl2ZUNhbGw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgYXVkaW9FbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcbiAgdmlkZW9FbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcbiAgbG9jYWxTdHJlYW06IFN0cmVhbVxuICByZW1vdGVDYWxsczogYW55ID0gW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhZ29yYVNlcnZpY2U6IEFuZ3VsYXJBZ29yYVJ0Y1NlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY3JlYXRlQ2xpZW50KCk7XG4gIH1cblxuICBzdGFydENhbGwoKSB7XG4gICAgdGhpcy5hY3RpdmVDYWxsID0gdHJ1ZTtcbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQuam9pbihudWxsLCAnMTAwMCcsIG51bGwsICh1aWQpID0+IHtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW0gPSB0aGlzLmFnb3JhU2VydmljZS5jcmVhdGVTdHJlYW0odWlkLCB0cnVlLCBudWxsLCBudWxsLCB0cnVlLCBmYWxzZSk7XG4gICAgICB0aGlzLmxvY2FsU3RyZWFtLnNldFZpZGVvUHJvZmlsZSgnNzIwcF8zJyk7XG4gICAgICB0aGlzLnN1YnNjcmliZVRvU3RyZWFtcygpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVUb1N0cmVhbXMoKSB7XG4gICAgdGhpcy5sb2NhbFN0cmVhbS5vbihcImFjY2Vzc0FsbG93ZWRcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJhY2Nlc3NBbGxvd2VkXCIpO1xuICAgIH0pO1xuICAgIC8vIFRoZSB1c2VyIGhhcyBkZW5pZWQgYWNjZXNzIHRvIHRoZSBjYW1lcmEgYW5kIG1pYy5cbiAgICB0aGlzLmxvY2FsU3RyZWFtLm9uKFwiYWNjZXNzRGVuaWVkXCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiYWNjZXNzRGVuaWVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5sb2NhbFN0cmVhbS5pbml0KCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiZ2V0VXNlck1lZGlhIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW0ucGxheSgnYWdvcmFfbG9jYWwnKTtcbiAgICAgIHRoaXMuYWdvcmFTZXJ2aWNlLmNsaWVudC5wdWJsaXNoKHRoaXMubG9jYWxTdHJlYW0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQdWJsaXNoIGxvY2FsIHN0cmVhbSBlcnJvcjogXCIgKyBlcnIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQub24oJ3N0cmVhbS1wdWJsaXNoZWQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHVibGlzaCBsb2NhbCBzdHJlYW0gc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgY29uc29sZS5sb2coXCJnZXRVc2VyTWVkaWEgZmFpbGVkXCIsIGVycik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJHb3QgZXJyb3IgbXNnOlwiLCBlcnIucmVhc29uKTtcbiAgICAgIGlmIChlcnIucmVhc29uID09PSAnRFlOQU1JQ19LRVlfVElNRU9VVCcpIHtcbiAgICAgICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50LnJlbmV3Q2hhbm5lbEtleShcIlwiLCAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJSZW5ldyBjaGFubmVsIGtleSBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbmV3IGNoYW5uZWwga2V5IGZhaWxlZDogXCIsIGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50Lm9uKCdzdHJlYW0tYWRkZWQnLCAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBldnQuc3RyZWFtO1xuICAgICAgdGhpcy5hZ29yYVNlcnZpY2UuY2xpZW50LnN1YnNjcmliZShzdHJlYW0sIChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJTdWJzY3JpYmUgc3RyZWFtIGZhaWxlZFwiLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQub24oJ3N0cmVhbS1zdWJzY3JpYmVkJywgKGV2dCkgPT4ge1xuICAgICAgY29uc3Qgc3RyZWFtID0gZXZ0LnN0cmVhbTtcbiAgICAgIGlmICghdGhpcy5yZW1vdGVDYWxscy5pbmNsdWRlcyhgYWdvcmFfcmVtb3RlJHtzdHJlYW0uZ2V0SWQoKX1gKSkgdGhpcy5yZW1vdGVDYWxscy5wdXNoKGBhZ29yYV9yZW1vdGUke3N0cmVhbS5nZXRJZCgpfWApO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBzdHJlYW0ucGxheShgYWdvcmFfcmVtb3RlJHtzdHJlYW0uZ2V0SWQoKX1gKSwgMjAwMCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQub24oJ3N0cmVhbS1yZW1vdmVkJywgKGV2dCkgPT4ge1xuICAgICAgY29uc3Qgc3RyZWFtID0gZXZ0LnN0cmVhbTtcbiAgICAgIHN0cmVhbS5zdG9wKCk7XG4gICAgICB0aGlzLnJlbW90ZUNhbGxzID0gdGhpcy5yZW1vdGVDYWxscy5maWx0ZXIoY2FsbCA9PiBjYWxsICE9PSBgI2Fnb3JhX3JlbW90ZSR7c3RyZWFtLmdldElkKCl9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgUmVtb3RlIHN0cmVhbSBpcyByZW1vdmVkICR7c3RyZWFtLmdldElkKCl9YCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQub24oJ3BlZXItbGVhdmUnLCAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCBzdHJlYW0gPSBldnQuc3RyZWFtO1xuICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICBzdHJlYW0uc3RvcCgpO1xuICAgICAgICB0aGlzLnJlbW90ZUNhbGxzID0gdGhpcy5yZW1vdGVDYWxscy5maWx0ZXIoY2FsbCA9PiBjYWxsID09PSBgI2Fnb3JhX3JlbW90ZSR7c3RyZWFtLmdldElkKCl9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2V2dC51aWR9IGxlZnQgZnJvbSB0aGlzIGNoYW5uZWxgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBsZWF2ZSgpIHtcbiAgICB0aGlzLmFnb3JhU2VydmljZS5jbGllbnQubGVhdmUoKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVDYWxsID0gZmFsc2U7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWdvcmFfbG9jYWwnKS5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgY29uc29sZS5sb2coXCJMZWF2ZWwgY2hhbm5lbCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSwgKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJMZWF2ZSBjaGFubmVsIGZhaWxlZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZUF1ZGlvKCkge1xuICAgIHRoaXMuYXVkaW9FbmFibGVkID0gIXRoaXMuYXVkaW9FbmFibGVkO1xuICAgIGlmICh0aGlzLmF1ZGlvRW5hYmxlZCkgdGhpcy5sb2NhbFN0cmVhbS5lbmFibGVBdWRpbygpO1xuICAgIGVsc2UgdGhpcy5sb2NhbFN0cmVhbS5kaXNhYmxlQXVkaW8oKTtcbiAgfVxuXG4gIHRvZ2dsZVZpZGVvKCkge1xuICAgIHRoaXMudmlkZW9FbmFibGVkID0gIXRoaXMudmlkZW9FbmFibGVkO1xuICAgIGlmICh0aGlzLnZpZGVvRW5hYmxlZCkgdGhpcy5sb2NhbFN0cmVhbS5lbmFibGVWaWRlbygpO1xuICAgIGVsc2UgdGhpcy5sb2NhbFN0cmVhbS5kaXNhYmxlVmlkZW8oKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWdvcmFMb2NhbENvbXBvbmVudCB9IGZyb20gJy4vYWdvcmEtbG9jYWwuY29tcG9uZW50JztcbmltcG9ydCB7IEFnb3JhQ29uZmlnIH0gZnJvbSAnLi9BZ29yYUNvbmZpZyc7XG5pbXBvcnQgeyBBbmd1bGFyQWdvcmFSdGNTZXJ2aWNlIH0gZnJvbSAnLi9hbmd1bGFyLWFnb3JhLXJ0Yy5zZXJ2aWNlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbQWdvcmFMb2NhbENvbXBvbmVudF0sXG4gIGV4cG9ydHM6IFtBZ29yYUxvY2FsQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyQWdvcmFSdGNNb2R1bGUge1xuICBzdGF0aWMgZm9yUm9vdChjb25maWc6IEFnb3JhQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVyc3tcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IEFuZ3VsYXJBZ29yYVJ0Y01vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW0FuZ3VsYXJBZ29yYVJ0Y1NlcnZpY2UsIHtwcm92aWRlOiAnY29uZmlnJywgdXNlVmFsdWU6IGNvbmZpZ31dXG4gICAgfTtcbiAgfVxuIH1cbiIsImV4cG9ydCBjbGFzcyBBZ29yYUNsaWVudCB7XG4gICAgYWVzTW9kZTogc3RyaW5nO1xuICAgIGFlc3Bhc3N3b3JkOiBzdHJpbmc7XG4gICAgY29uZmlnUHVibGlzaGVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZGlzYWJsZUR1YWxTdHJlYW06IGFueTsgLy8gZnVuY3Rpb25cbiAgICBlbmFibGVEdWFsU3RyZWFtOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZ2F0ZXdheUNsaWVudDoge307IC8vIGFkZCBvYmplY3RcbiAgICBoaWdoU3RyZWFtOiBhbnk7IC8vID8gdHlwZVxuICAgIGhpZ2hTdHJlYW1TdGF0ZTogbnVtYmVyO1xuICAgIGluaXQ6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBpc0R1YWxTdHJlYW06IGJvb2xlYW47XG4gICAgam9pbjogYW55OyAvLyBmdW5jdGlvblxuICAgIGtleTogYW55OyAvLyA/IHN0cmluZ1xuICAgIGxlYXZlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgbG93U3RyZWFtOiBhbnk7IC8vID9cbiAgICBsb3dTdHJlYW1QYXJhbWV0ZXI6IGFueSAvLyA/XG4gICAgbG93U3RyZWFtU3RhdGU6IG51bWJlcjtcbiAgICBvbjogYW55OyAvLyBmdW5jdGlvblxuICAgIHByb3h5U2VydmVyOiBhbnk7IC8vID9cbiAgICBwdWJsaXNoOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgcmVuZXdDaGFubmVsS2V5OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0RW5jcnlwdGlvbk1vZGU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRFbmNyeXB0aW9uU2VjcmV0OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0TGl2ZVRyYW5zY29kaW5nOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0TG93U3RyZWFtUGFyYW1ldGVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0UHJveHlTZXJ2ZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRSZW1vdGVWaWRlb1N0cmVhbVR5cGU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzZXRUdXJuU2VydmVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc3RhcnRMaXZlU3RyZWFtaW5nOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc3RvcExpdmVTdHJlYW1pbmc6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzdWJzY3JpYmU6IGFueTsgLy8gZnVuY3Rpb25cbiAgICB0dXJuU2VydmVyOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgdW5wdWJsaXNoOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgdW5zdWJzY3JpYmU6IGFueTsgLy8gZnVuY3Rpb25cbiAgfSIsImV4cG9ydCBjbGFzcyBTdHJlYW0ge1xuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBhdWRpbzogYm9vbGVhbjtcbiAgICBhdWRpb0VuYWJsZWQ6IGJvb2xlYW47XG4gICAgYXVkaW9MZXZlbEhlbHBlcjogYW55IC8vID9cbiAgICBhdXhfc3RyZWFtOiBhbnk7IC8vID9cbiAgICBjbG9zZTogYW55OyAvLyBmdW5jdGlvbiBcbiAgICBkaXNhYmxlQXVkaW86IGFueTsgLy8gZnVuY3Rpb25cbiAgICBkaXNhYmxlVmlkZW86IGFueTsgLy8gZnVuY3Rpb25cbiAgICBkaXNwYXRjaEV2ZW50OiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZGlzcGF0Y2hTb2NrZXRFdmVudDogYW55OyAvLyBmdW5jdGlvblxuICAgIGRpc3BhdGNoZXI6IGFueTsgLy8gZXZlbnQgbGlzdGVuZXJcbiAgICBlbmFibGVBdWRpbzogYW55OyAvLyBmdW5jdGlvblxuICAgIGVuYWJsZVZpZGVvOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgZ2V0QXR0cmlidXRlczogYW55OyAvLyBmdW5jdGlvblxuICAgIGdldEF1ZGlvTGV2ZWw6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBnZXRJZDogYW55OyAvLyBmdW5jdGlvblxuICAgIGdldFN0YXRzOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgaGFzQXVkaW86IGFueTsgLy8gZnVuY3Rpb25cbiAgICBoYXNTY3JlZW46IGFueTsgLy8gZnVuY3Rpb25cbiAgICBoYXNWaWRlbzogYW55OyAvLyBmdW5jdGlvblxuICAgIGluaXQ6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBpbml0aWFsaXplZDogYm9vbGVhbjtcbiAgICBpc0F1ZGlvT246IGFueTsgLy8gZnVuY3Rpb25cbiAgICBpc1ZpZGVvT246IGFueTsgLy8gZnVuY3Rpb25cbiAgICBsb2NhbDogYm9vbGVhbjtcbiAgICBsb3dTdHJlYW06IGFueTsgLy8/XG4gICAgbWlycm9yOiBib29sZWFuO1xuICAgIG11dGVBdWRpbzogYW55OyAvLyA/XG4gICAgbXV0ZVZpZGVvOiBhbnk7IC8vID9cbiAgICBvbjogYW55OyAvLyBmdW5jdGlvblxuICAgIG9uQ2xvc2U6IGFueSAvLyA/XG4gICAgcGFyYW1zOlxuICAgICAgICB7IHN0cmVhbUlEOiBudW1iZXIsIGF1ZGlvOiBib29sZWFuLCBjYW1lcmFJZDogc3RyaW5nLCBtaWNyb3Bob25lSWQ6IHN0cmluZywgdmlkZW86IGJvb2xlYW4gfVxuICAgIHBsYXk6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBwbGF5ZXI6IGFueTsgLy8gP1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzY3JlZW46IGJvb2xlYW47XG4gICAgc2NyZWVuQXR0cmlidXRlczogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgbWF4RnI6IG51bWJlciwgbWluRnI6IG51bWJlciB9XG4gICAgc2V0U2NyZWVuUHJvZmlsZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFZpZGVvQml0UmF0ZTogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFZpZGVvRnJhbWVSYXRlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VmlkZW9Qcm9maWxlOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VmlkZW9Qcm9maWxlQ3VzdG9tOiBhbnk7IC8vIGZ1bmN0aW9uXG4gICAgc2V0VmlkZW9Qcm9maWxlQ3VzdG9tUGx1czogYW55OyAvLyBmdW5jdGlvblxuICAgIHNldFZpZGVvUmVzb2x1dGlvbjogYW55OyAvLyBmdW5jdGlvblxuICAgIHN0b3A6IGFueTsgLy8gZnVuY3Rpb25cbiAgICBzdHJlYW1MYW55bCAvLyA/XG4gICAgc3RyZWFtSWQ6IG51bWJlcjtcbiAgICB1bm11dGVBdWRpbzogYW55OyAvLyA/XG4gICAgdW5tdXRlVmlkZW86IGFueTsgLy8gP1xuICAgIHVybDogYW55OyAvLz9cbiAgICB2aWRlbzogYm9vbGVhbjtcbiAgICB2aWRlb0VuYWJsZWQ6IGJvb2xlYW47XG4gICAgdmlkZW9IZWlnaHQ6IG51bWJlcjtcbiAgICB2aWRlb1NpemU6IEFycmF5PG51bWJlcj5cbiAgICB2aWRlb1dpZHRoOiBudW1iZXI7XG59IiwiZXhwb3J0IGNsYXNzIERldmljZSB7XG4gICAgZGV2aWNlSWQ6c3RyaW5nO1xuICAgIGdyb3VwSWQ6c3RyaW5nO1xuICAgIGtpbmQ6c3RyaW5nO1xuICAgIGxhYmVsOnN0cmluZztcbn0iXX0=